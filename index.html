<!DOCTYPE html>
<html lang="en">

<head>
	<title>gokart</title>
	<meta charset="utf-8">
	<meta name="generator" content="Three.js Editor">
	<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<style>
		body {
		font-family: sans-serif;
		font-size: 13px;
		background-color: #000;
		margin: 0px;
		overflow: hidden;
		}

		input[type=range] {
		-webkit-appearance: none;
		width: 400px;
		border-radius: 10px; /*这个属性设置使填充进度条时的图形为圆角*/
		}
		input[type=range]::-webkit-slider-thumb {
		-webkit-appearance: none;
		}
		input[type=range]::-webkit-slider-runnable-track {
		height: 15px;
		border-radius: 10px; /*将轨道设为圆角的*/
		background: rgb(129, 129, 129)
		/* box-shadow: 0 1px 1px #686868, inset .05em .05em #818181; 轨道内置阴影效果 */
		}
		input[type=range]:focus {
		outline: none;
		}

		input[type=range]::-webkit-slider-thumb {
		-webkit-appearance: none;
		height: 25px;
		width: 25px;
		margin-top: -7px; /*使滑块超出轨道部分的偏移量相等*/
		background: #ffd900;
		border-radius: 50%; /*外观设置为圆形*/
		/* border: solid 1em rgba(205, 224, 230, 0.5); 设置边框 */
		box-shadow: 0 0.2em 0.2em #3b4547; /*添加底部阴影*/
		}
		</style>
</head>

<body ontouchstart="">
	<script src="js/three.min.js"></script>
	<script src="js/app.js"></script>
	<!-- <script src="js/jquery.min.js"></script> -->
	<!-- <script src="js/jquery.mobile-1.4.5.min.js"></script> -->



	<script>
		var loader = new THREE.FileLoader();
		loader.load('app.json', function (text) {

			var player = new APP.Player();
			player.load(JSON.parse(text));
			player.setSize(window.innerWidth, window.innerHeight);
			player.play();

			document.body.appendChild(player.dom);

			window.addEventListener('resize', function () {
				player.setSize(window.innerWidth, window.innerHeight);
			});

			var slider = document.createElement('input');
			slider.type = 'range';
			slider.style.cssText = 'position: absolute; bottom: 80px; right: 0; left: 0; width: 170px; margin: auto;';
			slider.value = 0;
			slider.min = 0;
			slider.max = 50;
			// var seat = player.getScene().getObjectByProperty('uuid', '8A8FE6E9-84F5-4D79-B691-D72B85807810', true);
			var seat = player.getScene().getObjectByName("seat");
			var seatdefaultPos = seat.position.y;
			var FrontwheelL = player.getScene().getObjectByName("FrontwheelL");
			var FrontwheelLdefaultPos = FrontwheelL.position.z;
			var FrontwheelR = player.getScene().getObjectByName("FrontwheelR");
			var FrontwheelRdefaultPos = FrontwheelR.position.z;
			var BackwheelL = player.getScene().getObjectByName("BackwheelL");
			var BackwheelLdefaultPos = BackwheelL.position.z;
			var BackwheelR = player.getScene().getObjectByName("BackwheelR");
			var BackwheelRdefaultPos = BackwheelR.position.z;

			slider.oninput = function () {
				var step = slider.value;
				seat.position.y = seatdefaultPos - step*2;
				FrontwheelL.position.z = FrontwheelLdefaultPos - step*2;
				FrontwheelR.position.z = FrontwheelRdefaultPos + step*2;
				BackwheelL.position.z = BackwheelLdefaultPos - step*2;
				BackwheelR.position.z = BackwheelRdefaultPos + step*2;

			}
			
			
			
			document.body.appendChild(slider);

		});



		var button = document.createElement('a');
		button.href = 'https://threejs.org/editor/#file=' + location.href.split('/').slice(0, -1).join('/') + '/app.json';
		button.style.cssText =
			'position: absolute; bottom: 20px; right: 20px; padding: 12px 14px; color: #fff; border: 1px solid #fff; border-radius: 4px; text-decoration: none;';
		button.target = '_blank';
		button.textContent = 'EDIT';
		document.body.appendChild(button);
	</script>
</body>

</html>